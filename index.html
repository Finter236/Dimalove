<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heart Animation</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: black;
            position: relative;
        }
        canvas {
            position: absolute;
        }
        #text {
            position: absolute;
            color: red;
            font-size: 48px;
            font-weight: bold;
            text-align: center;
        }
        audio {
            display: none;
        }
    </style>
</head>
<body>
    <canvas id="heartCanvas"></canvas>
    <div id="text">42</div>
    <audio id="bgMusic" autoplay loop>
        <source src="your-music-file.mp3" type="audio/mpeg">
    </audio>
    <script>
        const canvas = document.getElementById("heartCanvas");
        const ctx = canvas.getContext("2d");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        const textElement = document.getElementById("text");
        textElement.style.left = `${canvas.width / 2 - 25}px`;
        textElement.style.top = `${canvas.height / 2 - 25}px`;

        const particles = [];
        const heartShape = [];
        const heartSize = Math.min(canvas.width, canvas.height) / 4;
        
        for (let t = 0; t < Math.PI * 2; t += 0.05) {
            let x = heartSize * (16 * Math.pow(Math.sin(t), 3));
            let y = -heartSize * (13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));
            heartShape.push({ x: x + canvas.width / 2, y: y + canvas.height / 2.5 });
        }
        
        for (let i = 0; i < 600; i++) {
            let target = heartShape[Math.floor(Math.random() * heartShape.length)];
            particles.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                targetX: target.x,
                targetY: target.y,
                color: "white",
                reached: false
            });
        }
        
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            let allReached = true;
            
            particles.forEach(p => {
                if (!p.reached) {
                    p.x += (p.targetX - p.x) * 0.05;
                    p.y += (p.targetY - p.y) * 0.05;
                    if (Math.abs(p.x - p.targetX) < 1 && Math.abs(p.y - p.targetY) < 1) {
                        p.reached = true;
                    } else {
                        allReached = false;
                    }
                }
                ctx.fillStyle = p.color;
                ctx.beginPath();
                ctx.arc(p.x, p.y, 3, 0, Math.PI * 2);
                ctx.fill();
            });
            
            if (allReached) {
                setInterval(() => {
                    particles.forEach(p => p.color = p.color === "white" ? "pink" : "white");
                }, 1000);
            }
            requestAnimationFrame(animate);
        }
        animate();
        
        window.onload = () => {
            document.getElementById("bgMusic").play().catch(() => {
                console.log("Автовоспроизведение заблокировано");
            });
        };
    </script>
</body>
</html>
